<!doctype html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
 <head>
  <title>Основы Elasticsearch / Хабр</title>
 </head>
 <body>
  <div id="app" data-server-rendered="true" data-async-called="true">
   <div class="tm-layout__wrapper">
    <!---->
    <div></div><!---->
    <header class="tm-header">
     <div class="tm-page-width">
      <div class="tm-header__container">
       <!----> <span class="tm-header__logo-wrap"> <span class="tm-header__beta-sign" style="display:none;">β</span></span>
       <div class="tm-dropdown tm-header__projects">
        <div class="tm-dropdown__head">
         <button class="tm-header__dropdown-toggle"></button>
        </div><!---->
       </div>
       <div class="tm-feature tm-header__feature tm-feature tm-feature_variant-inline">
        <!---->
       </div><!----> <!---->
      </div>
     </div>
    </header>
    <div class="tm-layout">
     <div class="tm-page-progress-bar"></div>
     <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky">
      <div class="tm-page-width">
       <div class="tm-base-layout__header-wrapper">
        <div class="tm-main-menu">
         <div class="tm-main-menu__section">
          <nav class="tm-main-menu__section-content">
          </nav>
         </div>
        </div>
        <div class="tm-header-user-menu tm-base-layout__user-menu">
         <!----> <!----> <!---->
         <div class="tm-header-user-menu__item">
          <button class="tm-header-user-menu__toggle"></button>
         </div> <!---->
         <div class="v-portal" style="display:none;"></div>
        </div>
       </div>
      </div>
     </div><!---->
     <div class="tm-page-width"></div>
     <main class="tm-layout__container">
      <div hl="ru" data-async-called="true" class="tm-page">
       <div class="tm-page-width">
        <!---->
        <div class="tm-page__wrapper">
         <div class="tm-page__main tm-page__main_has-sidebar">
          <div class="pull-down">
           <!---->
           <div class="pull-down__header" style="height:0px;">
            <div class="pull-down__content" style="bottom:10px;"></div>
           </div>
           <div class="tm-adfox-banner__container">
            <!---->
            <div id="adfox_169815559787254866" class="tm-adfox-banner tm-adfox-banner tm-adfox-banner_variant-narrow"></div>
           </div>
           <div class="tm-article-presenter">
            <div class="tm-article-presenter__body">
             <div class="tm-misprint-area">
              <div class="tm-misprint-area__wrapper">
               <article class="tm-article-presenter__content tm-article-presenter__content_narrow">
                <div class="tm-article-presenter__header">
                 <div class="tm-article-snippet tm-article-presenter__snippet tm-article-snippet">
                  <div class="tm-article-snippet__meta-container">
                   <div class="tm-article-snippet__meta">
                    <span class="tm-user-info tm-article-snippet__author"> <span class="tm-user-info__user tm-user-info__user_appearance-default"> <span class="tm-article-datetime-published"><time datetime="2016-03-30T05:08:12.000Z" title="2016-03-30, 08:08">30 мар 2016 в 08:08</time></span></span></span>
                   </div><!---->
                  </div>
                  <h1 lang="ru" class="tm-title tm-title_h1"><span>Основы Elasticsearch</span></h1>
                  <div class="tm-article-snippet__stats">
                   <!---->
                   <div class="tm-article-reading-time">
                    <span class="tm-svg-icon__wrapper tm-article-reading-time__icon"></span> <span class="tm-article-reading-time__label"> 12 мин </span>
                   </div><span class="tm-icon-counter tm-data-icons__item"> <span class="tm-icon-counter__value">661K</span></span>
                  </div>
                  <div class="tm-publication-hubs__container">
                   <div class="tm-publication-hubs">
                    <span class="tm-publication-hub__link-container"></span><span class="tm-publication-hub__link-container"></span>
                   </div>
                  </div><!----> <!----> <!---->
                 </div>
                </div><!---->
                <div data-gallery-root="" lang="ru" class="tm-article-body">
                 <div></div>
                 <div id="post-content-body">
                  <div>
                   <div class="article-formatted-body article-formatted-body article-formatted-body_version-1">
                    <div xmlns="http://www.w3.org/1999/xhtml">
                     <p>Elasticsearch — поисковый движок с json rest api, использующий Lucene и написанный на Java. Описание всех преимуществ этого движка доступно на . Далее по тексту будем называть Elasticsearch как ES.</p>
                     <br>
                     <p>Подобные движки используются при сложном поиске по базе документов. Например, поиск с учетом морфологии языка или поиск по geo координатам.</p>
                     <br>
                     <p>В этой статье я расскажу про основы ES на примере индексации постов блога. Покажу как фильтровать, сортировать и искать документы.</p>
                     <br>
                     <p>Чтобы не зависеть от операционной системы, все запросы к ES я буду делать с помощью CURL. Также есть плагин для google chrome под названием .</p>
                     <br>
                     <p>По тексту расставлены ссылки на документацию и другие источники. В конце размещены ссылки для быстрого доступа к документации. Определения незнакомых терминов можно прочитать в .<br></p>
                     <br>
                     <h1>Установка ES</h1>
                     <br>
                     <p>Для этого нам сначала потребуется Java. Разработчики  установить версии Java новее, чем Java 8 update 20 или Java 7 update 55.</p>
                     <br>
                     <p>Дистрибутив ES доступен на . После распаковки архива нужно запустить <code>bin/elasticsearch</code>. Также доступны . Есть . .</p>
                     <br>
                     <p>После установки и запуска проверим работоспособность:</p>
                     <br>
                     <pre><code class="bash"># для удобства запомним адрес в переменную
#export ES_URL=$(docker-machine ip dev):9200
export ES_URL=localhost:9200

curl -X GET $ES_URL</code></pre>
                     <br>
                     <p>Нам придет приблизительно такой ответ:</p>
                     <br>
                     <pre><code>{
  "name" : "Heimdall",
  "cluster_name" : "elasticsearch",
  "version" : {
    "number" : "2.2.1",
    "build_hash" : "d045fc29d1932bce18b2e65ab8b297fbf6cd41a1",
    "build_timestamp" : "2016-03-09T09:38:54Z",
    "build_snapshot" : false,
    "lucene_version" : "5.4.1"
  },
  "tagline" : "You Know, for Search"
}</code></pre>
                     <br>
                     <h1>Индексация</h1>
                     <br>
                     <p>Добавим пост в ES:</p>
                     <br>
                     <pre><code class="bash"># Добавим документ c id 1 типа post в индекс blog.
# ?pretty указывает, что вывод должен быть человеко-читаемым.

curl -XPUT "$ES_URL/blog/post/1?pretty" -d'
{
  "title": "Веселые котята",
  "content": "&lt;p&gt;Смешная история про котят&lt;p&gt;",
  "tags": [
    "котята",
    "смешная история"
  ],
  "published_at": "2014-09-12T20:44:42+00:00"
}'
</code></pre>
                     <br>
                     <p>ответ сервера:</p>
                     <br>
                     <pre><code>{
  "_index" : "blog",
  "_type" : "post",
  "_id" : "1",
  "_version" : 1,
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "created" : false
}
</code></pre>
                     <br>
                     <p>ES автоматически создал  blog и  post. Можно провести условную аналогию: индекс — это база данных, а тип — таблица в этой БД. Каждый тип имеет свою схему — , также как и реляционная таблица. Mapping генерируется автоматически при индексации документа:</p>
                     <br>
                     <pre><code class="bash"># Получим mapping всех типов индекса blog
curl -XGET "$ES_URL/blog/_mapping?pretty"</code></pre>
                     <br>
                     <p>В ответе сервера я добавил в комментариях значения полей проиндексированного документа:</p>
                     <br>
                     <pre><code>{
  "blog" : {
    "mappings" : {
      "post" : {
        "properties" : {
          /* "content": "&lt;p&gt;Смешная история про котят&lt;p&gt;", */ 
          "content" : {
            "type" : "string"
          },
          /* "published_at": "2014-09-12T20:44:42+00:00" */
          "published_at" : {
            "type" : "date",
            "format" : "strict_date_optional_time||epoch_millis"
          },
          /* "tags": ["котята", "смешная история"] */
          "tags" : {
            "type" : "string"
          },
          /*  "title": "Веселые котята" */
          "title" : {
            "type" : "string"
          }
        }
      }
    }
  }
}</code></pre>
                     <br>
                     <p>Стоит отметить, что ES не делает различий между одиночным значением и массивом значений. Например, поле title содержит просто заголовок, а поле tags — массив строк, хотя они представлены в mapping одинаково.<br>
                       Позднее мы поговорим о маппинге более подобно.<br></p>
                     <br>
                     <h1>Запросы</h1>
                     <br>
                     <h2>Извлечение документа по его id:</h2>
                     <br>
                     <pre><code class="bash"># извлечем документ с id 1 типа post из индекса blog
curl -XGET "$ES_URL/blog/post/1?pretty"</code></pre>
                     <br>
                     <pre><code>{
  "_index" : "blog",
  "_type" : "post",
  "_id" : "1",
  "_version" : 1,
  "found" : true,
  "_source" : {
    "title" : "Веселые котята",
    "content" : "&lt;p&gt;Смешная история про котят&lt;p&gt;",
    "tags" : [ "котята", "смешная история" ],
    "published_at" : "2014-09-12T20:44:42+00:00"
  }
}</code></pre>
                     <br>
                     <p>В ответе появились новые ключи: <code>_version</code> и <code>_source</code>. Вообще, все ключи, начинающиеся с <code>_</code> относятся к служебным.</p>
                     <br>
                     <p>Ключ <code>_version</code> показывает версию документа. Он нужен для работы механизма оптимистических блокировок. Например, мы хотим изменить документ, имеющий версию 1. Мы отправляем измененный документ и указываем, что это правка документа с версией 1. Если кто-то другой тоже редактировал документ с версией 1 и отправил изменения раньше нас, то ES не примет наши изменения, т.к. он хранит документ с версией 2.</p>
                     <br>
                     <p>Ключ <code>_source</code> содержит тот документ, который мы индексировали. ES не использует это значение для поисковых операций, т.к. для поиска используются индексы. Для экономии места ES хранит сжатый исходный документ. Если нам нужен только id, а не весь исходный документ, то можно отключить хранение исходника.</p>
                     <br>
                     <p>Если нам не нужна дополнительная информация, можно получить только содержимое _source:</p>
                     <br>
                     <pre><code class="bash">curl -XGET "$ES_URL/blog/post/1/_source?pretty"</code></pre>
                     <br>
                     <pre><code>{
  "title" : "Веселые котята",
  "content" : "&lt;p&gt;Смешная история про котят&lt;p&gt;",
  "tags" : [ "котята", "смешная история" ],
  "published_at" : "2014-09-12T20:44:42+00:00"
}
</code></pre>
                     <br>
                     <p>Также можно выбрать только определенные поля:</p>
                     <br>
                     <pre><code class="bash"># извлечем только поле title
curl -XGET "$ES_URL/blog/post/1?_source=title&amp;pretty"</code></pre>
                     <br>
                     <pre><code>{
  "_index" : "blog",
  "_type" : "post",
  "_id" : "1",
  "_version" : 1,
  "found" : true,
  "_source" : {
    "title" : "Веселые котята"
  }
}</code></pre>
                     <br>
                     <p>Давайте проиндексируем еще несколько постов и выполним более сложные запросы.</p>
                     <br>
                     <pre><code class="bash">curl -XPUT "$ES_URL/blog/post/2" -d'
{
  "title": "Веселые щенки",
  "content": "&lt;p&gt;Смешная история про щенков&lt;p&gt;",
  "tags": [
    "щенки",
    "смешная история"
  ],
  "published_at": "2014-08-12T20:44:42+00:00"
}'</code></pre>
                     <br>
                     <pre><code class="bash">curl -XPUT "$ES_URL/blog/post/3" -d'
{
  "title": "Как у меня появился котенок",
  "content": "&lt;p&gt;Душераздирающая история про бедного котенка с улицы&lt;p&gt;",
  "tags": [
    "котята"
  ],
  "published_at": "2014-07-21T20:44:42+00:00"
}'</code></pre>
                     <br>
                     <h2>Сортировка</h2>
                     <br>
                     <pre><code class="bash"># найдем последний пост по дате публикации и извлечем поля title и published_at
curl -XGET "$ES_URL/blog/post/_search?pretty" -d'
{
  "size": 1,
  "_source": ["title", "published_at"],
  "sort": [{"published_at": "desc"}]
}'</code></pre>
                     <br>
                     <pre><code>{
  "took" : 8,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 3,
    "max_score" : null,
    "hits" : [ {
      "_index" : "blog",
      "_type" : "post",
      "_id" : "1",
      "_score" : null,
      "_source" : {
        "title" : "Веселые котята",
        "published_at" : "2014-09-12T20:44:42+00:00"
      },
      "sort" : [ 1410554682000 ]
    } ]
  }
}</code></pre>
                     <br>
                     <p>Мы выбрали последний пост. <code>size</code> ограничивает кол-во документов в выдаче. <code>total</code> показывает общее число документов, подходящих под запрос. <code>sort</code> в выдаче содержит массив целых чисел, по которым производится сортировка. Т.е. дата преобразовалась в целое число. Подробнее о сортировке можно прочитать в .<br></p>
                     <br>
                     <h2>Фильтры и запросы</h2>
                     <br>
                     <p>ES с версии 2 не различает фильты и запросы, вместо этого .<br>
                       Контекст запроса отличается от контекста фильтра тем, что запрос генерирует _score и не кэшируется. Что такое _score я покажу позже.<br></p>
                     <br>
                     <h2>Фильтрация по дате</h2>
                     <br>
                     <p>Используем запрос  в контексте filter:</p>
                     <br>
                     <pre><code class="bash"># получим посты, опубликованные 1ого сентября или позже
curl -XGET "$ES_URL/blog/post/_search?pretty" -d'
{
  "filter": {
    "range": {
      "published_at": { "gte": "2014-09-01" }
    }
  }
}'</code></pre>
                     <br>
                     <h2>Фильтрация по тегам</h2>
                     <br>
                     <p>Используем  для поиска id документов, содержащих заданное слово:</p>
                     <br>
                     <pre><code class="bash"># найдем все документы, в поле tags которых есть элемент 'котята'
curl -XGET "$ES_URL/blog/post/_search?pretty" -d'
{
  "_source": [
    "title",
    "tags"
  ],
  "filter": {
    "term": {
      "tags": "котята"
    }
  }
}'</code></pre>
                     <br>
                     <pre><code>{
  "took" : 9,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 2,
    "max_score" : 1.0,
    "hits" : [ {
      "_index" : "blog",
      "_type" : "post",
      "_id" : "1",
      "_score" : 1.0,
      "_source" : {
        "title" : "Веселые котята",
        "tags" : [ "котята", "смешная история" ]
      }
    }, {
      "_index" : "blog",
      "_type" : "post",
      "_id" : "3",
      "_score" : 1.0,
      "_source" : {
        "title" : "Как у меня появился котенок",
        "tags" : [ "котята" ]
      }
    } ]
  }
}</code></pre>
                     <br>
                     <h2>Полнотекстовый поиск</h2>
                     <br>
                     <p>Три наших документа содержат в поле content следующее:</p>
                     <br>
                     <ul>
                     </ul>
                     <br>
                     <p>Используем  для поиска id документов, содержащих заданное слово:</p>
                     <br>
                     <pre><code class="bash"># source: false означает, что не нужно извлекать _source найденных документов
curl -XGET "$ES_URL/blog/post/_search?pretty" -d'
{
  "_source": false,
  "query": {
    "match": {
      "content": "история"
    }
  }
}'</code></pre>
                     <br>
                     <pre><code>{
  "took" : 13,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 3,
    "max_score" : 0.11506981,
    "hits" : [ {
      "_index" : "blog",
      "_type" : "post",
      "_id" : "2",
      "_score" : 0.11506981
    }, {
      "_index" : "blog",
      "_type" : "post",
      "_id" : "1",
      "_score" : 0.11506981
    }, {
      "_index" : "blog",
      "_type" : "post",
      "_id" : "3",
      "_score" : 0.095891505
    } ]
  }
}</code></pre>
                     <br>
                     <p>Однако, если искать "истории" в поле контент, то мы ничего не найдем, т.к. в индексе содержатся только оригинальные слова, а не их основы. Для того чтобы сделать качественный поиск, нужно настроить анализатор.</p>
                     <br>
                     <p>Поле <code>_score</code> показывает . Если запрос выпоняется в filter context, то значение _score всегда будет равно 1, что означает полное соответствие фильтру.<br></p>
                     <br>
                     <h1>Анализаторы</h1>
                     <br>
                     <p>нужны, чтобы преобразовать исходный текст в набор токенов.<br>
                       Анализаторы состоят из одного  и нескольких необязательных . Tokenizer может предшествовать нескольким . Tokenizer разбивают исходную строку на токены, например, по пробелам и символам пунктуации. TokenFilter может изменять токены, удалять или добавлять новые, например, оставлять только основу слова, убирать предлоги, добавлять синонимы. CharFilter — изменяет исходную строку целиком, например, вырезает html теги.</p>
                     <br>
                     <p>В ES есть несколько . Например, анализатор .</p>
                     <br>
                     <p>Воспользуемся  и посмотрим, как анализаторы standard и russian преобразуют строку "Веселые истории про котят":</p>
                     <br>
                     <pre><code class="bash"># используем анализатор standard       
# обязательно нужно перекодировать не ASCII символы
curl -XGET "$ES_URL/_analyze?pretty&amp;analyzer=standard&amp;text=%D0%92%D0%B5%D1%81%D0%B5%D0%BB%D1%8B%D0%B5%20%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D0%B8%20%D0%BF%D1%80%D0%BE%20%D0%BA%D0%BE%D1%82%D1%8F%D1%82"</code></pre>
                     <br>
                     <pre><code>{
  "tokens" : [ {
    "token" : "веселые",
    "start_offset" : 0,
    "end_offset" : 7,
    "type" : "&lt;ALPHANUM&gt;",
    "position" : 0
  }, {
    "token" : "истории",
    "start_offset" : 8,
    "end_offset" : 15,
    "type" : "&lt;ALPHANUM&gt;",
    "position" : 1
  }, {
    "token" : "про",
    "start_offset" : 16,
    "end_offset" : 19,
    "type" : "&lt;ALPHANUM&gt;",
    "position" : 2
  }, {
    "token" : "котят",
    "start_offset" : 20,
    "end_offset" : 25,
    "type" : "&lt;ALPHANUM&gt;",
    "position" : 3
  } ]
}</code></pre>
                     <br>
                     <pre><code class="bash"># используем анализатор russian
curl -XGET "$ES_URL/_analyze?pretty&amp;analyzer=russian&amp;text=%D0%92%D0%B5%D1%81%D0%B5%D0%BB%D1%8B%D0%B5%20%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D0%B8%20%D0%BF%D1%80%D0%BE%20%D0%BA%D0%BE%D1%82%D1%8F%D1%82"</code></pre>
                     <br>
                     <pre><code>{
  "tokens" : [ {
    "token" : "весел",
    "start_offset" : 0,
    "end_offset" : 7,
    "type" : "&lt;ALPHANUM&gt;",
    "position" : 0
  }, {
    "token" : "истор",
    "start_offset" : 8,
    "end_offset" : 15,
    "type" : "&lt;ALPHANUM&gt;",
    "position" : 1
  }, {
    "token" : "кот",
    "start_offset" : 20,
    "end_offset" : 25,
    "type" : "&lt;ALPHANUM&gt;",
    "position" : 3
  } ]
}</code></pre>
                     <br>
                     <p>Стандартный анализатор разбил строку по пробелам и перевел все в нижний регистр, анализатор russian — убрал не значимые слова, перевел в нижний регистр и оставил основу слов.</p>
                     <br>
                     <p>Посмотрим, какие Tokenizer, TokenFilters, CharFilters использует анализатор russian:</p>
                     <br>
                     <pre><code>{
  "filter": {
    "russian_stop": {
      "type":       "stop",
      "stopwords":  "_russian_"
    },
    "russian_keywords": {
      "type":       "keyword_marker",
      "keywords":   []
    },
    "russian_stemmer": {
      "type":       "stemmer",
      "language":   "russian"
    }
  },
  "analyzer": {
    "russian": {
      "tokenizer":  "standard",
      /* TokenFilters */
      "filter": [
        "lowercase",
        "russian_stop",
        "russian_keywords",
        "russian_stemmer"
      ]
      /* CharFilters отсутствуют */
    }
  }
}</code></pre>
                     <br>
                     <p>Опишем свой анализатор на основе russian, который будет вырезать html теги. Назовем его default, т.к. анализатор с таким именем будет использоваться по умолчанию.</p>
                     <br>
                     <pre><code>{
  "filter": {
    "ru_stop": {
      "type":       "stop",
      "stopwords":  "_russian_"
    },
    "ru_stemmer": {
      "type":       "stemmer",
      "language":   "russian"
    }
  },
  "analyzer": {
    "default": {
      /* добавляем удаление html тегов */
      "char_filter": ["html_strip"],
      "tokenizer":  "standard",
      "filter": [
        "lowercase",
        "ru_stop",
        "ru_stemmer"
      ]
    }
  }
}</code></pre>
                     <br>
                     <p>Сначала из исходной строки удалятся все html теги, потом ее разобьет на токены tokenizer standard, полученные токены перейдут в нижний регистр, удалятся незначимые слова и от оставшихся токенов останется основа слова.<br></p>
                     <br>
                     <h1>Создание индекса</h1>
                     <br>
                     <p>Выше мы описали default анализатор. Он будет применяться ко всем строковым полям. Наш пост содержит массив тегов, соответственно, теги тоже будут обработаны анализатором. Т.к. мы ищем посты по точному соответствию тегу, то необходимо отключить анализ для поля tags.</p>
                     <br>
                     <p>Создадим индекс blog2 с анализатором и маппингом, в котором отключен анализ поля tags:</p>
                     <br>
                     <pre><code class="bash">curl -XPOST "$ES_URL/blog2" -d'
{
  "settings": {
    "analysis": {
      "filter": {
        "ru_stop": {
          "type": "stop",
          "stopwords": "_russian_"
        },
        "ru_stemmer": {
          "type": "stemmer",
          "language": "russian"
        }
      },
      "analyzer": {
        "default": {
          "char_filter": [
            "html_strip"
          ],
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "ru_stop",
            "ru_stemmer"
          ]
        }
      }
    }
  },
  "mappings": {
    "post": {
      "properties": {
        "content": {
          "type": "string"
        },
        "published_at": {
          "type": "date"
        },
        "tags": {
          "type": "string",
          "index": "not_analyzed"
        },
        "title": {
          "type": "string"
        }
      }
    }
  }
}'</code></pre>
                     <br>
                     <p>Добавим те же 3 поста в этот индекс (blog2). Я опущу этот процесс, т.к. он аналогичен добавлению документов в индекс blog.<br></p>
                     <br>
                     <h1>Полнотекстовый поиск с поддержкой выражений</h1>
                     <br>
                     <p>Познакомимся с еще одним типом запросов:</p>
                     <br>
                     <pre><code class="bash"># найдем документы, в которых встречается слово 'истории'
# query -&gt; simple_query_string -&gt; query содержит поисковый запрос
# поле title имеет приоритет 3
# поле tags имеет приоритет 2
# поле content имеет приоритет 1
# приоритет используется при ранжировании результатов
curl -XPOST "$ES_URL/blog2/post/_search?pretty" -d'
{
  "query": {
    "simple_query_string": {
      "query": "истории",
      "fields": [
        "title^3",
        "tags^2",
        "content"
      ]
    }
  }
}'</code></pre>
                     <br>
                     <p>Т.к. мы используем анализатор с русским стеммингом, то этот запрос вернет все документы, хотя в них встречается только слово 'история'.</p>
                     <br>
                     <p>Запрос может содержать специальные символы, например:</p>
                     <br>
                     <pre><code>"\"fried eggs\" +(eggplant | potato) -frittata"</code></pre>
                     <br>
                     <p>Синтаксис запроса:</p>
                     <br>
                     <pre><code>+ signifies AND operation
| signifies OR operation
- negates a single token
" wraps a number of tokens to signify a phrase for searching
* at the end of a term signifies a prefix query
( and ) signify precedence
~N after a word signifies edit distance (fuzziness)
~N after a phrase signifies slop amount</code></pre>
                     <br>
                     <pre><code class="bash"># найдем документы без слова 'щенки'
curl -XPOST "$ES_URL/blog2/post/_search?pretty" -d'
{
  "query": {
    "simple_query_string": {
      "query": "-щенки",
      "fields": [
        "title^3",
        "tags^2",
        "content"
      ]
    }
  }
}'

# получим 2 поста про котиков</code></pre>
                     <br>
                     <h1>Ссылки</h1>
                     <br>
                     <ul>
                     </ul>
                     <br>
                     <h1>PS</h1>
                     <br>
                     <p>Если интересны подобные статьи-уроки, есть идеи новых статей или есть предложения о сотрудничестве, то буду рад сообщению в личку или на почту m.kuzmin+habr@darkleaf.ru.</p>
                    </div>
                   </div>
                  </div><!----> <!---->
                 </div><!----> <!---->
                </div><!---->
                <div class="tm-article-presenter__meta">
                 <div class="tm-article-presenter__meta-list tm-separated-list">
                  <span class="tm-separated-list__title">Теги:</span>
                  <ul class="tm-separated-list__list">
                   <!---->
                  </ul>
                 </div>
                 <div class="tm-article-presenter__meta-list tm-separated-list">
                  <span class="tm-separated-list__title">Хабы:</span>
                  <ul class="tm-separated-list__list">
                   <!---->
                  </ul>
                 </div>
                </div><!---->
               </article>
              </div><!---->
             </div>
             <div class="tm-article-sticky-panel">
              <div class="tm-data-icons tm-article-sticky-panel__icons">
               <div class="tm-article-rating tm-data-icons__item">
                <div title="Всего голосов 39: ↑38 и ↓1" class="tm-votes-lever tm-article-rating__votes-switcher tm-votes-lever tm-votes-lever_appearance-article">
                 <button title="Нравится" type="button" class="tm-votes-lever__button"></button>
                 <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-article">
                  <span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_positive"> +37 </span></span>
                 </div><button title="Не нравится" type="button" class="tm-votes-lever__button"></button>
                </div>
                <div class="v-portal" style="display:none;"></div><!---->
               </div><!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span class="tm-svg-icon__wrapper bookmarks-button__icon"></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter"> 818 </span></button>
               <div title="Поделиться" class="tm-sharing tm-data-icons__item">
                <button type="button" class="tm-sharing__button"></button>
                <div class="v-portal" style="display:none;"></div>
               </div>
               <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item">
                <!---->
               </div><!---->
               <div class="v-portal" style="display:none;"></div>
              </div>
             </div>
            </div>
            <div class="tm-article-presenter__footer">
             <div class="tm-article-blocks">
              <!---->
              <section class="tm-block tm-block tm-block_spacing-bottom">
               <!---->
               <div class="tm-block__body tm-block__body tm-block__body_variant-balanced">
                <div class="tm-article-author">
                 <div class="tm-user-card tm-article-author__user-card tm-user-card tm-user-card_variant-article">
                  <div class="tm-user-card__info-container">
                   <div class="tm-user-card__header">
                    <div class="tm-user-card__header-data">
                     <div class="tm-user-card__meta">
                      <div title=" 78 голосов " class="tm-counter-container tm-karma tm-karma">
                       <div class="tm-counter-container__header">
                        <div class="tm-karma__votes tm-karma__votes_positive">
                         58
                        </div>
                       </div>
                       <div class="tm-counter-container__footer">
                        <div class="tm-karma__text">
                         Карма
                        </div>
                        <div class="v-portal" style="display:none;"></div>
                       </div>
                      </div>
                      <div title="Рейтинг пользователя" class="tm-counter-container">
                       <div class="tm-counter-container__header">
                        <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating">
                         <!---->
                         <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating">
                          <span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating"> 0 </span></span>
                         </div><!---->
                        </div>
                       </div>
                       <div class="tm-counter-container__footer">
                        <span class="tm-rating__text tm-rating__text"> Рейтинг </span>
                       </div>
                      </div>
                     </div>
                    </div>
                   </div>
                   <div class="tm-user-card__info tm-user-card__info tm-user-card__info_variant-article">
                    <div class="tm-user-card__title tm-user-card__title tm-user-card__title_variant-article">
                     <span class="tm-user-card__name tm-user-card__name tm-user-card__name_variant-article">Михаил Кузьмин</span> <!---->
                    </div>
                    <p class="tm-user-card__short-info tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p>
                   </div>
                  </div>
                  <div class="tm-user-card__buttons tm-user-card__buttons tm-user-card__buttons_variant-article">
                   <!----> <!----> <!----> <!---->
                  </div>
                 </div>
                 <div class="tm-article-author__user-contacts"></div>
                </div>
               </div><!---->
              </section>
              <div class="tm-adfox-banner__container tm-page-article__banner">
               <!---->
               <div id="adfox_164725660339535756" class="tm-adfox-banner tm-adfox-banner tm-adfox-banner_variant-leaderboard"></div>
              </div>
              <div class="tm-article-blocks__comments">
               <div id="publication-comments" class="tm-article-page-comments">
                <div class="tm-article-comments-counter-link tm-article-comments-counter-button">
                 <!---->
                </div>
               </div>
              </div>
              <section class="tm-block tm-block tm-block_spacing-bottom">
               <header class="tm-block__header tm-block__header tm-block__header_variant-borderless">
                <div class="tm-block__header-container">
                 <h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2>
                </div><!---->
               </header>
               <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim">
                <div class="tm-tabs tm-tabs">
                 <div>
                  <span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim"> Лучшие за сутки </button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_slim"> Похожие </button></span>
                 </div><!---->
                </div>
                <div class="similar-and-daily__tab-view">
                 <div class="placeholder-wrapper">
                  <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!---->
                  <div class="tm-placeholder-article-cards">
                   <div class="tm-placeholder-article-card">
                    <div class="tm-placeholder__user">
                     <div class="tm-placeholder__user-pic loads"></div>
                     <div class="tm-placeholder__user-date loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__title">
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__icons tm-placeholder__counters">
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                    </div>
                   </div>
                   <div class="tm-placeholder-article-card">
                    <div class="tm-placeholder__user">
                     <div class="tm-placeholder__user-pic loads"></div>
                     <div class="tm-placeholder__user-date loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__title">
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__icons tm-placeholder__counters">
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                    </div>
                   </div>
                   <div class="tm-placeholder-article-card">
                    <div class="tm-placeholder__user">
                     <div class="tm-placeholder__user-pic loads"></div>
                     <div class="tm-placeholder__user-date loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__title">
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__icons tm-placeholder__counters">
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                    </div>
                   </div>
                   <div class="tm-placeholder-article-card">
                    <div class="tm-placeholder__user">
                     <div class="tm-placeholder__user-pic loads"></div>
                     <div class="tm-placeholder__user-date loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__title">
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__icons tm-placeholder__counters">
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                    </div>
                   </div>
                   <div class="tm-placeholder-article-card">
                    <div class="tm-placeholder__user">
                     <div class="tm-placeholder__user-pic loads"></div>
                     <div class="tm-placeholder__user-date loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__title">
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                     <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div>
                    </div>
                    <div class="tm-placeholder-article-card__icons tm-placeholder__counters">
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                     <div class="tm-placeholder-data-icon">
                      <div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div>
                      <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div>
                     </div>
                    </div>
                   </div>
                  </div><!----> <!----> <!----> <!----> <!---->
                 </div><!---->
                </div>
               </div><!---->
              </section>
              <div>
               <div class="placeholder-wrapper">
                <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!---->
                <div class="tm-placeholder-promo">
                 <div class="tm-placeholder-promo__header">
                  <div class="tm-placeholder__line tm-placeholder__line_promo-title"></div>
                 </div>
                 <div class="tm-placeholder-promo__body">
                  <div class="tm-placeholder-promo__posts">
                   <div class="tm-placeholder-promo__post">
                    <div class="tm-placeholder-promo__image"></div>
                    <div class="tm-placeholder__line tm-placeholder__line_post-title"></div>
                   </div>
                   <div class="tm-placeholder-promo__post">
                    <div class="tm-placeholder-promo__image"></div>
                    <div class="tm-placeholder__line tm-placeholder__line_post-title"></div>
                   </div>
                   <div class="tm-placeholder-promo__post">
                    <div class="tm-placeholder-promo__image"></div>
                    <div class="tm-placeholder__line tm-placeholder__line_post-title"></div>
                   </div>
                  </div>
                  <div class="tm-placeholder-promo__dots">
                   <div class="tm-placeholder-promo__dot"></div>
                   <div class="tm-placeholder-promo__dot"></div>
                   <div class="tm-placeholder-promo__dot"></div>
                  </div>
                 </div>
                </div><!----> <!----> <!----> <!----> <!----> <!---->
               </div>
              </div>
              <div>
               <div class="placeholder-wrapper">
                <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!---->
                <div class="tm-placeholder-inset tm-placeholder-salary">
                 <div class="tm-placeholder-inset__header">
                  <div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div>
                 </div>
                 <div class="tm-placeholder-salary__body">
                  <div class="tm-placeholder-salary__text">
                   <div class="tm-placeholder__line tm-placeholder__line_salary_average"></div>
                   <div class="tm-placeholder-salary__description">
                    <div class="tm-placeholder__line loads"></div>
                    <div class="tm-placeholder__line loads"></div>
                    <div class="tm-placeholder__line loads"></div>
                    <div class="tm-placeholder__line loads"></div>
                   </div>
                  </div>
                  <div class="tm-placeholder-salary__image loads"></div>
                 </div>
                 <div class="tm-placeholder-inset__footer tm-placeholder-inset__footer_salary">
                  <div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div>
                 </div>
                </div><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!---->
               </div>
              </div><!---->
             </div>
            </div>
           </div>
          </div>
         </div>
         <div class="tm-page__sidebar">
          <div class="tm-layout-sidebar">
           <div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial">
            <div class="tm-adfox-banner__container tm-layout-sidebar__banner tm-layout-sidebar__banner_top">
             <!---->
             <div id="adfox_164725680533065327" class="tm-adfox-banner tm-adfox-banner tm-adfox-banner_variant-half-page"></div>
            </div>
           </div>
           <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;">
            <!---->
            <section data-navigatable="" tabindex="0" data-async-called="true" class="tm-block tm-stories-block tm-block tm-block_spacing-around">
             <header class="tm-block__header tm-block__header">
              <div class="tm-block__header-container">
               <h2 class="tm-block__title tm-block__title">Истории</h2>
              </div><!---->
             </header>
             <div class="tm-block__body tm-block__body tm-block__body_variant-equal">
              <div class="tm-stories-empty">
               <div class="tm-stories-card-empty">
                <div class="tm-stories-card-empty__image"></div>
                <div class="tm-stories-card-empty__title">
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                </div>
               </div>
               <div class="tm-stories-card-empty">
                <div class="tm-stories-card-empty__image"></div>
                <div class="tm-stories-card-empty__title">
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                </div>
               </div>
               <div class="tm-stories-card-empty">
                <div class="tm-stories-card-empty__image"></div>
                <div class="tm-stories-card-empty__title">
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                </div>
               </div>
               <div class="tm-stories-card-empty">
                <div class="tm-stories-card-empty__image"></div>
                <div class="tm-stories-card-empty__title">
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                </div>
               </div>
               <div class="tm-stories-card-empty">
                <div class="tm-stories-card-empty__image"></div>
                <div class="tm-stories-card-empty__title">
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                </div>
               </div>
               <div class="tm-stories-card-empty">
                <div class="tm-stories-card-empty__image"></div>
                <div class="tm-stories-card-empty__title">
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                 <div class="tm-stories-card-empty__title-block"></div>
                </div>
               </div>
              </div><!---->
             </div><!---->
            </section><!---->
            <section data-async-called="true" class="tm-block block tm-block tm-block_spacing-around" data-v-cb9bff32>
             <header class="tm-block__header tm-block__header">
              <div class="tm-block__header-container">
               <h2 class="tm-block__title tm-block__title">Ближайшие события</h2>
              </div><!---->
             </header>
             <div class="tm-block__body tm-block__body">
              <div class="swiper-container slider" style="--swiper-space-between:22px;" data-v-cb9bff32>
               <div class="swiper-wrapper">
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_130" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>1 – 29 февраля </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>11:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_154" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>5 – 29 февраля </span>
                     </div><!---->
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_162" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>17 февраля </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>10:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_142" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>18 – 19 февраля </span>
                     </div><!---->
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_174" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>19 февраля </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>17:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_156" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>19 февраля </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>19:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_164" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>19 февраля </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>20:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_170" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>21 февраля </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>20:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_172" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>21 февраля </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>20:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_122" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>27 февраля </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>20:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_176" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>1 марта – 19 апреля </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>19:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_140" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>4 – 5 марта </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>10:00 – 20:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Москва</span> <span class="tm-event-card__places-separator"> • </span></span><span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
                <div class="swiper-slide" data-v-cb9bff32>
                 <section id="events_160" tabindex="-1" class="tm-block tm-block tm-block_spacing-none" data-v-cb9bff32>
                  <!---->
                  <div class="tm-event-card tm-event-card_is-widget">
                   <!---->
                   <div class="tm-event-card__info">
                    <div class="tm-event-card__date">
                     <div class="tm-event-card__day">
                      <span>21 марта </span>
                     </div>
                     <div class="tm-event-card__time">
                      <span>09:00 – 18:00</span>
                     </div>
                    </div>
                    <div class="tm-event-card__places">
                     <div class="tm-event-card__places-list">
                      <span class="tm-event-card__places-item"><span>Москва</span> <span class="tm-event-card__places-separator"> • </span></span><span class="tm-event-card__places-item"><span>Онлайн</span> <!----></span>
                     </div>
                    </div>
                    <div class="tm-event-card__footer"></div>
                   </div><!---->
                  </div><!---->
                 </section>
                </div>
               </div><!----> <button class="swiper-button-prev"><span class="tm-svg-icon__wrapper swiper-button-icon"></span></button> <button class="swiper-button-next"><span class="tm-svg-icon__wrapper swiper-button-icon"></span></button>
              </div>
             </div><!---->
            </section>
            <div class="tm-adfox-banner__container tm-layout-sidebar__banner tm-layout-sidebar__banner_bottom">
             <!---->
             <div id="adfox_164725691003361602" class="tm-adfox-banner tm-adfox-banner tm-adfox-banner_variant-medium-rectangle"></div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </main><!---->
    </div>
    <div class="tm-footer-menu">
     <div class="tm-page-width">
      <div class="tm-footer-menu__container">
       <div class="tm-footer-menu__block">
        <p class="tm-footer-menu__block-title">Ваш аккаунт</p>
        <div class="tm-footer-menu__block-content">
         <ul class="tm-footer-menu__list"></ul>
        </div>
       </div>
       <div class="tm-footer-menu__block">
        <p class="tm-footer-menu__block-title">Разделы</p>
        <div class="tm-footer-menu__block-content">
         <ul class="tm-footer-menu__list"></ul>
        </div>
       </div>
       <div class="tm-footer-menu__block">
        <p class="tm-footer-menu__block-title">Информация</p>
        <div class="tm-footer-menu__block-content">
         <ul class="tm-footer-menu__list"></ul>
        </div>
       </div>
       <div class="tm-footer-menu__block">
        <p class="tm-footer-menu__block-title">Услуги</p>
        <div class="tm-footer-menu__block-content">
         <ul class="tm-footer-menu__list"></ul>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div class="tm-footer">
     <div class="tm-page-width">
      <div class="tm-footer__container">
       <!---->
       <div class="tm-footer__social"></div>
       <div class="v-portal" style="display:none;"></div><button class="tm-footer__link"><!----> Настройка языка </button>
       <div class="tm-footer-copyright">
        <span class="tm-copyright"><span class="tm-copyright__years">© 2006–2024, </span> <span class="tm-copyright__name"></span></span>
       </div>
      </div>
     </div>
    </div><!---->
   </div>
   <div class="vue-portal-target"></div>
  </div>
  <noscript>
   <div>
   </div>
  </noscript>
 </body>
</html>