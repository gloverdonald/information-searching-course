Hyper-V
или
KVM?
/
Хабр
β
Рейтинг
VDS/VPS-хостинг
Скидка
%
по
коду
HABR
авг
в
:
Hyper-V
или
KVM?
мин
K
Технология
виртуализации
серверов
со
своей
более
чем
тридцатилетней
историей
сегодня
стала
одной
из
ключевых
в
ИТ
легла
в
основу
облачных
вычислений
и
сервисов
нового
поколения
Компании
выбирающие
платформу
для
или
внедрения
виртуализации
в
своей
ИТ-инфраструктуре
наряду
с
продуктами
VMware
рассматривают
в
качестве
альтернативы
решения
на
основе
других
гипервизоров
прежде
всего
Microsoft
Hyper-V
и
разработанного
в
рамках
Open
Source
гипервизора
KVM
Разнообразие
средств
виртуализации
заставляет
задуматься:
что
именно
выбрать?
Это
может
оказаться
непростой
задачей
Например
сторонники
Xen
считают
ее
надежной
и
гибкой
платформой
с
хорошим
набором
инструментов
управления
Любители
Hyper-V
и
KVM
приведут
весомые
аргументы
в
пользу
этих
решений
и
перечислят
их
достоинства
Можно
исходить
при
выборе
из
таких
параметров
как
производительность
стоимость
открытость
эффективность
управляемость
поддержка
платформ…
Однако
эксперты
советуют
выбирать
решение
виртуализации
прежде
всего
руководствуясь
требованиями
бизнеса
Развертываемое
в
корпоративной
среде
оно
должно
подходить
для
обширного
стека
сертифицированных
бизнес-приложений
(ERP
MRP
HR
CRM
и
др
)
а
разработчик
если
это
коммерческий
продукт
должен
иметь
четкие
планы
развития
продукта
по
разным
направлениям
(аварийное
восстановление
резервное
копирование
SDN
и
др
)
Наконец
хорошее
программное
обеспечение
виртуализации
обладает
достаточной
масштабируемостью
и
гибкостью
Например
производительность
KVM
при
увеличении
нагрузки
уменьшается
быстрее
чем
у
Xen
(если
верить
результатам
тестирования)
Xen
отличает
масштабируемость
–
способность
поддерживать
большое
число
одновременно
работающих
ВМ
Считается
что
Xen
превосходит
KVM
по
возможностям
резервного
копирования
и
управления
хранением
данных
Подобная
дилемма
возникает
и
при
анализе
предложений
по
аренде
виртуальных
серверов
(VDS/VPS)
Хостеры
предлагают
разнообразные
средства
виртуализации
включая
Xen
KVM
Microsoft
Hyper-V
OpenVZ
Virtuozzo
manager
и
др
(VMware
–
очень
редко
ввиду
высокой
стоимости)
при
этом
провайдер
всегда
готов
рассказать
о
достоинствах
используемой
системы
но
продукты
виртуализации
редко
сравнивают
и
столь
же
редко
упоминают
об
их
недостатках
Попробуем
отчасти
восполнить
этот
пробел
В
частности
—
сопоставить
два
популярных
гипервизора
виртуализации
–
Microsoft
Hyper-V
для
серверных
ОС
семейства
Windows
и
KVM
для
Linuх
Однако
сразу
стоит
оговориться
что
идеальной
системы
виртуализации
для
нет
каждая
подходит
для
своих
задач
Например
многие
из
тех
кто
использует
платформу
KVM
применяют
и
виртуальные
машины
(ВМ)
на
базе
Linux
Нужен
VPS
c
Linux
или
FreeBSD?
Можно
выбрать
KVM
VPS
на
KVM
с
Windows
–
тоже
вариант
но
для
данной
ОС
предпочтительнее
Microsoft
Hyper-V
Последний
считается
лучшим
решением
для
виртуализации
серверов
с
ОС
Windows
и
активно
используется
хостинг-провайдерами
Xen
и
KVM
–
продукты
с
открытым
исходным
кодом
причем
очень
близкие
по
функциям
и
производительности
но
если
в
версии
Сitrix
XenServer
первый
постепенно
превращается
в
облачную
платформу
то
развитие
KVM
идет
в
ногу
с
эволюцией
дистрибутивов
таких
как
RHEV
от
Red
Hat
Hyper-V
—
коммерческое
ПО
от
Microsoft
Не
удивительно
что
Hyper-V
отлично
работает
в
инфраструктуре
Windows
Все
они
позволяют
виртуализировать
серверные
платформы
x
-
и
представляют
собой
системы
аппаратной
виртуализации
для
и
не
только
Hyper-V
KVM
ESXi
–
гипервизоры
первого
типа
(Type-I)
Они
работают
непосредственно
на
физическом
оборудовании
к
которому
операционная
система
получает
доступ
через
гипервизор
Гипервизоры
второго
типа
(Type-II)
например
VMware
Workstation
Oracle
Virtual
Box
OpenVZ
функционируют
поверх
операционной
системы
поэтому
ВМ
и
гипервизор
взаимодействует
с
оборудованием
через
ОС
Считается
что
производительность
гипервизоров
второго
типа
ниже
чем
первого
поскольку
зависит
также
от
ОС
хоста
Использование
Hyper-V
и
KVM
в
разных
отраслях
%
респондентов
(данные
)
Гипервизор
Hyper-V
KVM
Финансы
%
%
Транспорт
%
%
Производство
%
%
Госсектор
%
%
Использование
Hyper-V
и
KVM
в
компаниях
с
разной
численностью
сотрудников
%
респондентов
(данные
)
Гипервизор
Hyper-V
KVM
-
%
%
-
%
%
>
%
%
Эти
два
гипервизора
сравнивают
не
только
друг
с
другом
KVM
иногда
сопоставляют
с
VMware
ESXi
и
IBM
PowerVM
а
Microsoft
Hyper-V
нередко
—
с
Oracle
VM
VirtualBox
изредка
—
с
Proxmox
VE
Альтернативы
Hyper-V
и
KVM
(в
версии
Open
Source)
по
мнению
отраслевой
прессы
(в
порядке
убывания;
рейтинг
составлен
год)
Microsoft
Hyper-V
Продукт
Microsoft
существует
в
двух
ипостасях:
как
автономный
Hyper-V
Server
(в
последней
версии
—
Hyper-V
Server
R
)
или
как
один
из
компонентов
Windows
Server
Windows
Server
R
Windows
Server
Windows
Server
R
или
-разрядной
версии
Window
/
Pro
В
любом
случае
он
используется
для
создания
на
сервере
виртуальной
среды
предоставляя
для
этого
соответствующие
сервисы
и
инструменты
Можно
также
виртуализировать
рабочие
места
развернув
инфраструктуру
VDI
или
создать
удобную
среду
для
разработки
и
тестирования
ПО
Экономичная
и
стабильная
среда
виртуализации
Hyper-V
позволяет
одновременно
запускать
на
хосте
несколько
операционных
систем
включая
Windows
Linux
и
другие
На
текущий
момент
Hyper-V
используют
компании
и
организации
практически
любых
отраслей
в
их
числе
крупнейшие
заказчики
Что
это
дает?
Например
Hyper-V
может
служить
основой
для
развертывания
частного
облака
позволяет
оптимизировать
использование
аппаратных
ресурсов
консолидировать
серверы
запустив
на
одной
физической
системе
несколько
виртуальных
машин
обеспечить
отказоустойчивость
для
непрерывности
бизнес-процессов
Впрочем
это
свойственно
не
только
данному
гипервизору
В
по
виртуализации
серверной
инфраструктуры
х
(Magic
Quadrant
for
x
Server
Virtualization
Infrastructure)
выпущенном
в
июле
года
лидируют
Micrоsoft
и
VMware
Xen
и
KVM
представлены
вендорами
Citrix
и
Red
Hat
За
что
же
именно
ценят
Hyper-V?
Системные
администраторы
и
ИТ-менеджеры
называют
такие
качества
как
высокая
стабильность
работы
Hyper-V
и
Windows
поддержка
«живой
миграции»
ВМ
(Live
Migration)
и
кластеризации
(для
построения
конфигураций
высокой
доступности)
масштабируемость
возможность
присваивания
сетевых
карт
(NIC)
виртуальным
машинам
что
позволяет
избежать
узких
мест
подчас
возникающих
когда
виртуальному
коммутатору
назначен
один
физический
сетевой
адаптер
Live
Migration
позволяет
перемещать
ВМ
между
физическими
серверами
Hyper-V
в
том
числе
и
автоматически
без
участия
пользователя
Упоминают
также
возможность
централизованного
управления
серверами
—
несколькими
хостами
Hyper-V
причем
без
дополнительной
покупки
лицензий
как
в
случае
VMware
vCenter
Относительно
просто
(хотя
и
более
запутанно
чем
в
VMware)
выполняется
миграция
физического
сервера
в
виртуальный
(P
V)
Для
этого
создается
образ
VHD
физической
системы
и
присваивается
новой
ВМ
Удобный
режим
Enhanced
Session
Mode
позволяет
выполнять
копирование/вставку
внутри
ВМ
Hyper-V
прост
в
использовании
и
управлении
–
хорошая
альтернатива
продукту
VMware
в
сегменте
SMB
Он
включен
и
в
Windows
причем
это
почти
полнофункциональная
версия
Сам
гипервизор
ничего
не
стоит
его
можно
скачать
с
сайта
Microsoft
(в
виде
Hyper-V
Server)
хорошо
подходит
для
виртуализации
ОС
от
Microsoft
его
легко
установить
и
настроить
а
большинство
системных
администраторов
умеют
с
ним
работать
Hуper-V
можно
установить
на
любой
поддерживающий
Windows
сервер
Еще
в
копилку
плюсов:
большинство
продуктов
Microsoft
могут
работать
в
виртуальной
среде
Hyper-V
К
негативным
качествам
относят
ограниченные
возможности
настройки
работы
с
СХД
(например
сложности
настройки
iSCSI
target
в
Windows
Server
R
Более
надежным
и
дружественным
мог
бы
быть
импорт/экспорт
создание
шаблонов
В
Hyper-V
достаточно
сложно
конфигурировать
некоторые
вещи
например
High
Availability
(HA)
где
требуется
формирования
кластера
(Failover
Clustering)
В
vSphere
например
это
делается
проще
и
естественнее
А
миграция
ВМ
в
Hyper-V
в
отличие
от
vMotion
возможна
только
между
серверами
с
процессорами
одного
семейства
Нет
в
Hyper-V
и
ничего
похожего
на
Distributed
Resource
Scheduler
(DRS)
или
Storage
DRS
которые
в
среде
виртуализации
VMware
можно
использовать
для
балансирования
нагрузок
между
ресурсами
нескольких
хостов
с
помощью
vMotion
и
Storage
vMotion
Зато
SCVMM
(System
Center
Virtual
Machine
Manager
)
в
Hyper-V
открывает
возможности
выходящие
за
рамки
собственно
серверной
виртуализации
Например
можно
создать
частное
облако
с
функциями
самообслуживания
В
VMware
есть
vCloud
Director
но
это
отдельное
решение
за
отдельные
деньги
У
Microsoft
SCVMM
–
бесплатное
приложение
к
System
Center
Кроме
того
SCVMM
позволяет
использовать
в
качестве
платформ
виртуализации
хосты
с
Hyper-V
vSphere
и
гипервизором
Citrix
в
то
время
как
vCenter
поддерживает
только
управление
хостами
VMware
Также
можно
упомянуть
что
Debian
и
основанные
на
нем
дистрибутивы
и
могут
применяться
для
реализации
инфраструктурных
элементов
работающих
с
большой
нагрузкой
Также
недавно
компания
Microsoft
выпустила
обновление
представляющее
собой
работающих
в
виртуальных
машинах
на
платформах
Hyper-V
и
Azure
Особенности
Microsoft
Hyper-V
в
Windows
Server
R
Datacenter
Edition
Максимальное
число
одновременно
работающих
ВМ
Максимальное
число
процессоров
на
хост-сервер
Число
ядер
на
процессор
хоста
Не
ограничено
Максимальное
число
виртуальных
процессоров
(vCPU)
на
хост-сервер
Максимальная
емкость
оперативной
памяти
на
хост-сервер
Тбайт
Память
на
одну
ВМ
Тбайт
Виртуальных
процессоров
на
ВМ
vCPU
Динамическое
перераспределение
памяти
Dynamic
Memory
Дедупликация
страниц
памяти
Нет
Поддержка
больших
страниц
памяти
(Large
Memory
Pages)
Да
Централизованное
управление
Да
System
Center
Virtual
Machine
Manager
(SCVMM)
Интеграция
с
Active
Directory
Да
(через
SCVMM)
Снимки
ВМ
(snapshot)
Да
Управление
через
браузер
Через
портал
самообслуживания
Обновления
хост-серверов/
гипервизора
Да
Управление
сторонними
гипервизорами
Да
управление
VMware
vCenter
и
Citrix
XenCenter
Обновление
ВМ
Да
(WSUS
SCCM
VMST)
Режим
обслуживания
(Maintenance
Mode)
Да
Динамическое
управление
питанием
Да
Power
Optimization
API
для
резервного
копирования
Да
VSS
API
Шаблоны
виртуальных
машин
(VM
Templates)
Да
Профили
настройки
хостов
(Host
Profiles)
Да
Миграция
физических
серверов
в
виртуальные
машины
(P
V)
Нет
Горячая
миграция
виртуальных
машин
Да
без
общего
хранилища
(Shared
Nothing)
поддержка
сжатия
и
SMB
неограниченное
число
одновременных
миграций
Горячая
миграция
хранилищ
ВМ
Да
Профили
хранилищ
Да
Поддержка
USB
Нет
(за
исключением
Enhanced
Session
Mode)
Горячее
добавление
устройств
Только
устройства
хранения
и/или
память
Устройства
Floppy
в
ВМ
Сетевые
адаптеры/интерфейсы
NIC
Виртуальные
диски
IDE
Емкость
виртуального
диска
Тбайта
для
VHDX
Максимальное
число
узлов
в
кластере
Виртуальных
машин
в
кластере
Функции
высокой
доступности
при
сбоях
хост-серверов
Failover
Clustering
Перезапуск
виртуальных
машин
в
случае
сбоя
на
уровне
гостевой
ОС
Да
Обеспечение
доступности
на
уровне
приложений
Да
(Failover
Clustering)
Непрерывная
доступность
ВМ
Нет
Репликация
виртуальных
машин
Да
Hyper-V
Replica
Автоматическое
управление
ресурсами
кластера
Да
Dynamic
Optimization
Пулы
ресурсов
Да
(Host
Groups)
Проверка
совместимости
процессоров
при
миграциях
машин
Да
Processor
Compatibility
Поддерживаемые
хранилища
SMB
FC
Virtual
FC
SAS
SATA
iSCSI
FCoE
Shared
VHDX
Кластерная
файловая
система
CSV
(Cluster
Shared
Volumes)
Поддержка
Boot
from
SAN
Да
(iSCSI
FC)
Динамическое
выделение
емкости
хранения
(Thin
Provisioning)
Да
Dynamic
Disks
Загрузка
с
USB
Нет
Хранилища
на
базе
локальных
дисков
серверов
Storage
Spaces
Tiered
Storage
Уровни
обслуживания
для
подсистемы
ввода-вывода
Да
Storage
QoS
Поддержка
NPIV
Да
(Virtual
Fibre
Channel)
Поддержка
доступа
по
нескольким
путям
(multipathing)
Да
(DSM
и
SMB
Multichannel)
Кэширование
Да
CSV
Cache
API
для
интеграции
с
хранилищами
Да
SMI-S/SMP
ODX
Trim
Поддержка
NIC
Teaming
Да
Поддержка
Private
VLAN
Да
Поддержка
Jumbo
Frames
Да
Поддержка
Network
QoS
Да
Поддержка
IPv
Да
Мониторинг
трафика
Да
KVM
А
теперь
пара
слов
о
KVM
Хотя
в
деле
построения
виртуализированных
инфраструктур
для
крупного
бизнеса
платформы
от
Microsoft
и
VMware
по-прежнему
являются
несомненными
лидерами
в
последние
отмечается
рост
интереса
и
к
KVM
KVM
(Kernel-based
Virtual
Machine)
–
полное
решение
виртуализации
для
платформ
Linux/x
поддерживающее
аппаратные
расширения
(Intel
VT
и
AMD-V)
В
его
составе
–
загружаемый
модуль
ядра
kvm
ko
обеспечивающий
базовую
инфраструктуру
виртуализации
и
модуль
для
конкретного
процессора
—
kvm-intel
ko
или
kvm-amd
ko
Первоначально
KVM
поддерживал
только
процессоры
x
но
в
настоящее
время
к
ним
добавился
широкий
спектр
процессоров
и
гостевых
операционных
систем
в
том
числе
множество
вариаций
Linux
BSD
Solaris
Windows
Haiku
ReactOS
и
AROS
Research
Operating
System
В
числе
пользователей
KVM
–
известные
Wiki-ресурсы:
MediaWiki
Wikimedia
Foundation
Wikipedia
Wikivoyage
Wikidata
Wikiversity
В
году
«Лаборатория
Касперского»
совместно
с
B
B
International
провела
в
ходе
которого
представителям
компаний
использующих
технологию
виртуализации
задавались
вопросы
про
применяемые
у
них
платформы
Выяснилось
что
%
компаний
используют
различные
варианты
коммерческих
платформ
на
базе
KVM
и
еще
%
планируют
их
внедрять
в
течение
ближайшей
пары
лет
Бесплатные
версии
продукта
используются
в
%
крупных
организаций
и
еще
в
%
опрошенных
компаний
будут
внедрены
в
будущем
Исследование
«Лаборатории
Касперского»
показало
что
если
основными
гипервизорами
чаще
всего
являются
VMware
vSphere
и
Microsoft
Hyper-V
то
в
качестве
дополнительного
предпочитают
использовать
решения
с
открытым
кодом
или
коммерческие
решения
на
базе
Open
Source
Особенно
часто
—
KVM
В
«Лаборатории
Касперского»
считают
что
причин
популярности
KVM
несколько
Во-первых
в
некоторых
сценариях
внедрение
платформы
виртуализации
на
базе
KVM
(даже
коммерческой
ее
версии)
обходится
значительно
дешевле
чем
использование
Microsoft
Hyper-V
и
VMware
vSphere
Во-вторых
в
мире
растет
количество
виртуализированных
Linux-серверов
Их
владельцам
привычнее
и
удобнее
применять
и
гипервизор
на
базе
Linux
В
большинстве
случаев
это
именно
KVM
Кроме
того
Linux-сообщество
вносит
вклад
в
развитие
платформы
развивается
экосистема
решений
которые
поддерживающих
KVM
Компании
создающие
собственные
проекты
интегрированные
решения
зачастую
выбирают
гипервизор
Open
Source
а
KVM
как
раз
предоставляет
широкие
возможности
кастомизации
Наконец
KVM
—
легкий
простой
в
использовании
неприхотливый
к
ресурсам
и
при
этом
достаточно
функциональный
гипервизор
Он
позволяет
в
сжатые
сроки
развернуть
платформу
виртуализации
констатируют
в
«Лаборатории
Касперского»
в
сочетании
с
ядром
Linux
обеспечивает
простоту
реализации
гибок
Так
как
гостевые
операционные
системы
взаимодействуют
с
гипервизором
интегрированным
в
ядро
Linux
они
могут
во
всех
случаях
обращаться
непосредственно
к
оборудованию
без
необходимости
изменения
виртуализированной
операционной
системы
Это
делает
KVM
быстрым
решением
для
виртуальных
машин
KVM
реализован
в
самом
ядре
Linux
что
облегчает
управление
процессами
виртуализации
С
другой
стороны
мощных
инструментов
для
управления
сервером
и
виртуальными
машинами
KVM
не
существует
KVM
нуждается
в
совершенствовании
поддержки
виртуальных
сетей
и
виртуальных
систем
хранения
усилении
защиты
в
улучшении
надежности
и
отказоустойчивости
управления
питанием
поддержки
HPC/систем
реального
времени
масштабируемости
виртуальных
процессоров
совместимости
между
поставщиками
а
также
в
создании
экосистемы
облачных
сервисов
Раз
уж
речь
зашла
об
управлении
стоит
упомянуть
один
из
популярных
вариантов
управления
VPS
в
случае
KVM
–
SolusVM
Это
универсальная
панель
управления
виртуальными
серверами
Xen
KVM
и
OpenVZ
Некоторые
пользователи
отмечают
недостаточную
стабильность
KVM
при
выполнении
задач
с
интенсивным
вводом-выводам
что
KVM
–
не
вполне
зрелый
продукт
для
рабочих
сред
и
больше
подходит
для
экспериментов
и
в
случаях
когда
требуется
модификация
исходного
кода
Hyper-V
более
стабилен
средства
миграции
ВМ
в
нем
надежнее
эффективнее
используется
оборудование
чем
в
Linux-KVM
Подготовка
KVM
к
работе
и
настройка
десятков
параметров
–
процесс
на
любителя
хотя
есть
и
интерфейс
управления
Virsh
(и
GUI-интерфейс
virtmanager)
позволяющий
запускать
гостевые
системы
в
KVM
используя
простой
файл
конфигурации
Для
управления
гипервизором
KVM
удобно
также
использовать
инструменты
OpenStack
Это
помогает
в
частности
внедрять
облачные
сервисы
Службы
поддержки
как
таковой
нет
только
сообщество
Но
те
кому
она
необходима
могут
выбрать
коммерческий
вариант
—
RHEV
(Red
Hat
Enterprise
Virtualization)
Заключение
Возможно
эта
информация
поможет
вам
сделать
правильный
выбор
однако
как
уже
отмечалось
выше
очень
многое
зависит
от
решаемой
задачи
и
многих
других
условий
А
спектр
таких
задач
сегодня
чрезвычайно
широк
–
от
виртуального
хостинга
до
построения
программно-определяемых
дата-центров
(SDDC)
и
внедрения
гибридных
облаков
Например
среда
виртуализации
в
ЦОД
должна
обеспечивать
сочетание
нескольких
важных
характеристик:
зрелость
простота
развертывания
управляемость
и
автоматизация
поддержка
и
сопровождение
производительность
масштабируемость
надежность
высокая
готовность
и
работоспособность
безопасность
При
выборе
платформы
виртуализации
для
VPS/VDS
действуют
иные
критерии
Нередко
неверный
её
выбор
—
это
потраченные
деньги
и
неудовлетворения
качеством
услуг
Квалифицированная
консультация
и
подбор
сервера
с
возможностью
тестирования
выбранного
тарифа
помогут
избежать
большинства
проблем
А
бэкграунд
для
того
чтобы
начать
диалог
с
поставщиком
услуг
VPS/VDS
у
вас
уже
есть
Теги:
Хабы:
+
VDS/VPS-хостинг
Скидка
%
по
коду
HABR
Карма
Рейтинг
Пользователь
Публикации
Лучшие
за
сутки
Похожие
Информация
Сайт
Дата
регистрации
марта
Дата
основания
июля
Численность
–
человек
Местоположение
Россия
Представитель
Ваш
аккаунт
Разделы
Информация
Услуги
Настройка
языка
©
–
